{"ast":null,"code":"import _classCallCheck from \"C:/Users/Oguzhan/Desktop/BlockGuard/mwallet/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/Oguzhan/Desktop/BlockGuard/mwallet/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"C:/Users/Oguzhan/Desktop/BlockGuard/mwallet/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"C:/Users/Oguzhan/Desktop/BlockGuard/mwallet/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"C:/Users/Oguzhan/Desktop/BlockGuard/mwallet/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n// Cipher Block Chaining\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CBC_iv, _CBC_lastBlock;\nimport { ModeOfOperation } from \"./mode.js\";\nexport var CBC = /*#__PURE__*/function (_ModeOfOperation) {\n  _inherits(CBC, _ModeOfOperation);\n  var _super = _createSuper(CBC);\n  function CBC(key, iv) {\n    var _this;\n    _classCallCheck(this, CBC);\n    _this = _super.call(this, \"ECC\", key, CBC);\n    _CBC_iv.set(_assertThisInitialized(_this), void 0);\n    _CBC_lastBlock.set(_assertThisInitialized(_this), void 0);\n    if (iv) {\n      if (iv.length % 16) {\n        throw new TypeError(\"invalid iv size (must be 16 bytes)\");\n      }\n      __classPrivateFieldSet(_assertThisInitialized(_this), _CBC_iv, new Uint8Array(iv), \"f\");\n    } else {\n      __classPrivateFieldSet(_assertThisInitialized(_this), _CBC_iv, new Uint8Array(16), \"f\");\n    }\n    __classPrivateFieldSet(_assertThisInitialized(_this), _CBC_lastBlock, _this.iv, \"f\");\n    return _this;\n  }\n  _createClass(CBC, [{\n    key: \"iv\",\n    get: function get() {\n      return new Uint8Array(__classPrivateFieldGet(this, _CBC_iv, \"f\"));\n    }\n  }, {\n    key: \"encrypt\",\n    value: function encrypt(plaintext) {\n      if (plaintext.length % 16) {\n        throw new TypeError(\"invalid plaintext size (must be multiple of 16 bytes)\");\n      }\n      var ciphertext = new Uint8Array(plaintext.length);\n      for (var i = 0; i < plaintext.length; i += 16) {\n        for (var j = 0; j < 16; j++) {\n          __classPrivateFieldGet(this, _CBC_lastBlock, \"f\")[j] ^= plaintext[i + j];\n        }\n        __classPrivateFieldSet(this, _CBC_lastBlock, this.aes.encrypt(__classPrivateFieldGet(this, _CBC_lastBlock, \"f\")), \"f\");\n        ciphertext.set(__classPrivateFieldGet(this, _CBC_lastBlock, \"f\"), i);\n      }\n      return ciphertext;\n    }\n  }, {\n    key: \"decrypt\",\n    value: function decrypt(ciphertext) {\n      if (ciphertext.length % 16) {\n        throw new TypeError(\"invalid ciphertext size (must be multiple of 16 bytes)\");\n      }\n      var plaintext = new Uint8Array(ciphertext.length);\n      for (var i = 0; i < ciphertext.length; i += 16) {\n        var block = this.aes.decrypt(ciphertext.subarray(i, i + 16));\n        for (var j = 0; j < 16; j++) {\n          plaintext[i + j] = block[j] ^ __classPrivateFieldGet(this, _CBC_lastBlock, \"f\")[j];\n          __classPrivateFieldGet(this, _CBC_lastBlock, \"f\")[j] = ciphertext[i + j];\n        }\n      }\n      return plaintext;\n    }\n  }]);\n  return CBC;\n}(ModeOfOperation);\n_CBC_iv = new WeakMap(), _CBC_lastBlock = new WeakMap();","map":{"version":3,"names":["ModeOfOperation","CBC","_ModeOfOperation","_inherits","_super","_createSuper","key","iv","_this","_classCallCheck","call","_CBC_iv","set","_assertThisInitialized","_CBC_lastBlock","length","TypeError","__classPrivateFieldSet","Uint8Array","_createClass","get","__classPrivateFieldGet","value","encrypt","plaintext","ciphertext","i","j","aes","decrypt","block","subarray"],"sources":["C:\\Users\\Oguzhan\\Desktop\\BlockGuard\\mwallet\\node_modules\\aes-js\\src.ts\\mode-cbc.ts"],"sourcesContent":["// Cipher Block Chaining\n\nimport { ModeOfOperation } from \"./mode.js\";\n\nexport class CBC extends ModeOfOperation {\n  #iv: Uint8Array;\n  #lastBlock: Uint8Array;\n\n  constructor(key: Uint8Array, iv?: Uint8Array) {\n    super(\"ECC\", key, CBC);\n\n    if (iv) {\n      if (iv.length % 16) {\n        throw new TypeError(\"invalid iv size (must be 16 bytes)\");\n      }\n      this.#iv = new Uint8Array(iv);\n    } else {\n      this.#iv = new Uint8Array(16);\n    }\n\n    this.#lastBlock = this.iv;\n  }\n\n  get iv(): Uint8Array { return new Uint8Array(this.#iv); }\n\n  encrypt(plaintext: Uint8Array): Uint8Array {\n    if (plaintext.length % 16) {\n      throw new TypeError(\"invalid plaintext size (must be multiple of 16 bytes)\");\n    }\n\n    const ciphertext = new Uint8Array(plaintext.length);\n    for (let i = 0; i < plaintext.length; i += 16) {\n      for (let j = 0; j < 16; j++) {\n        this.#lastBlock[j] ^= plaintext[i + j];\n      }\n\n      this.#lastBlock = this.aes.encrypt(this.#lastBlock);\n      ciphertext.set(this.#lastBlock, i);\n    }\n\n    return ciphertext;\n  }\n\n  decrypt(ciphertext: Uint8Array): Uint8Array {\n    if (ciphertext.length % 16) {\n        throw new TypeError(\"invalid ciphertext size (must be multiple of 16 bytes)\");\n    }\n\n    const plaintext = new Uint8Array(ciphertext.length);\n    for (let i = 0; i < ciphertext.length; i += 16) {\n        const block = this.aes.decrypt(ciphertext.subarray(i, i + 16));\n\n        for (let j = 0; j < 16; j++) {\n          plaintext[i + j] = block[j] ^ this.#lastBlock[j];\n          this.#lastBlock[j] = ciphertext[i + j];\n        }\n    }\n\n    return plaintext;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}